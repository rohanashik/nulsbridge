<!DOCTYPE html>
    <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>NULS Bridge Test</title>
			<script src="http://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

        </head>
        <body onload="myFunction()">
            <p>This page is for NULS Bridge test</p>

			
			<script>

                async function myFunction() {

                    if (typeof window.bridge !== 'undefined') {
                        console.log('Bridge is installed!');

                        // console.log(await bridge.clearData());

                        // console.log(await bridge.isConnected());
                        if(!await bridge.isConnected()) {
                            console.log("Invoking Connection to Bridge");
                            console.log("Authorization ---> "+await bridge.enable());
                        }

                        var address = await bridge.getWalletAddress();
                        console.log("Default Account ---> "+ address);
                        // console.log("Switch Account ---> "+await bridge.switchAccount());

                        //
                        // console.log("Connected to Bridge");
                        //
                        console.log("Accounts - " + JSON.stringify(await bridge.getAccounts("getAccountsList")));
                        var tokenbalance = await bridge.getTokenBalance(address, "tNULSeBaNBWvMJc6RxtwabsDux3mgPjEKtb3Lm");
                        console.log("TokenBalance - " + tokenbalance.amount);
                        var coinbalance = await bridge.getBalance(address);
                        console.log("CoinBalance - " + coinbalance.totalBalance);
                        //
                        //
                        var inputs = {
                            "contractAddress": "tNULSeBaN2TLFuecRgASzC7KdbfjhbGD9MthHQ",
                            "methodName": "issue",
                            "args": ["nulsv2bkjridge"],
                            "value":0,
                            "sender":"tNULSeBaMhmHrnX4XJHbZxR4ypRun52s1uYnJB"
                        };

                        console.log("Contract Write ---> "+JSON.stringify(await bridge.contractWrite(inputs)));
                        //
                        // console.log("DeAuthorized ---> "+await bridge.disable());

                    } else {
                        console.log('Bridge is not installed!');
                    }


                    // bridge.enable();

                }

			</script>
			
			
			
        </body>
    </html>